# AWS Elastic Beanstalk Python FastAPI Configuration
# Runs Python FastAPI as background worker alongside Node.js

files:
  "/home/ec2-user/start_python.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/bin/bash
      cd /var/app/current/backend/python_backend
      pip install -r requirements.txt
      python -m uvicorn main:app --host 0.0.0.0 --port 8000 &

container_commands:
  01_python_deps:
    command: "cd /var/app/current/backend/python_backend && pip install -r requirements.txt"
    ignoreErrors: true
  02_start_python:
    command: "bash /home/ec2-user/start_python.sh"
    ignoreErrors: true
